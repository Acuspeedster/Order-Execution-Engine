generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum OrderStatus {
  PENDING
  ROUTING
  BUILDING
  SUBMITTED
  CONFIRMED
  FAILED
}

enum OrderType {
  MARKET
  LIMIT
  SNIPER
}

enum DexType {
  RAYDIUM
  METEORA
}

model Order {
  id              String      @id @default(uuid())
  type            OrderType
  status          OrderStatus @default(PENDING)
  
  // Trading pairs
  fromToken       String
  toToken         String
  amount          Float
  
  // Routing
  selectedDex     DexType?
  raydiumPrice    Float?
  meteoraPrice    Float?
  executionPrice  Float?
  
  // Transaction
  txHash          String?
  slippageTolerance Float    @default(0.01)
  
  // Retry logic
  retryCount      Int         @default(0)
  failureReason   String?
  
  // Timestamps
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  completedAt     DateTime?
  
  @@index([status])
  @@index([createdAt])
}
